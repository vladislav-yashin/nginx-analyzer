# üìä –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ Nginx ‚Äî –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –∫—É—Ä—Å—É Otus Python

[![Build](https://github.com/vladislav-yashin/nginx-analyzer/actions/workflows/nginx-analyzer.yml/badge.svg)](https://github.com/vladislav-yashin/nginx-analyzer/actions/workflows/nginx-analyzer.yml)

–ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤ Nginx, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏—Ç access-–ª–æ–≥–∏, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON-–æ—Ç—á—ë—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üß© –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–ü—Ä–æ–≥—Ä–∞–º–º–∞:
- –ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `nginx` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `combined`).
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ—Ç–æ–¥, URL, —Å—Ç–∞—Ç—É—Å, –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è.
- –§–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –°—Ä–µ–¥–Ω–µ–µ, –º–µ–¥–∏–∞–Ω–Ω–æ–µ, 95-–µ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞
  - –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –û–Ω–æ —á–∏—Ç–∞–µ—Ç –ª–æ–≥-—Ñ–∞–π–ª Nginx –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [Docker](https://docs.docker.com/get-docker/)

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ª–æ–≥-—Ñ–∞–π–ª Nginx –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∏–∑ logs/access.log

### –ó–∞–ø—É—Å–∫

```bash
docker build -t nginx-analyzer . docker run --rm -v {PWD}/reports:/app/reports nginx-analyzer
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- –û—Ç—á—ë—Ç –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ `reports/report.json`

### –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –æ—Ç—á—ë—Ç–∞

```json
{
  "total_requests": 50,
  "average_request_time": 0.0947,
  "median_request_time": 0.025,
  "p95_request_time": 0.312,
  "slowest_request_time": 1.502,
  "fastest_request_time": 0.001
}
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –∑–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞

–ï—Å–ª–∏ –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥, –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∏–ª—å:

```bash
bash docker run --rm --entrypoint="" nginx-analyzer sh -c "poetry run ruff check ."
```